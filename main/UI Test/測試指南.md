# 🎨 ChroLens Blockly 編輯器 - 完整測試指南

## ✅ 功能測試已通過

所有核心功能測試已完成並通過：
- ✅ 模組導入成功
- ✅ 編輯器實例創建
- ✅ 畫布組件初始化
- ✅ 工具箱組件正常
- ✅ 節點創建與連接
- ✅ JSON 轉換功能
- ✅ 所有核心方法已實現

## 🚀 立即開始測試

### 步驟 1：啟動編輯器
```bash
cd "c:\Users\Lucien\Documents\GitHub\ChroLens_Mimic\main\UI Test"
python blockly_script_editor.py
```

### 步驟 2：載入測試腳本
1. 在頂部右側腳本下拉選單選擇：**blockly_demo_script**
2. 點擊「重新載入」按鈕
3. 觀察畫布上出現 **18 個連接的節點**

### 步驟 3：測試浮動工具箱
1. **拖曳工具箱**
   - 按住「🔧 工具箱」標題列
   - 拖曳到畫布右側或任意位置
   
2. **使用工具創建節點**
   - 點擊工具箱中的「移動滑鼠」
   - 觀察畫布上創建新的藍色節點
   - 新節點自動連接到最後一個節點
   
3. **最小化工具箱**
   - 點擊工具箱右上角的「−」按鈕
   - 工具箱收起，節省空間
   - 再點一次展開

### 步驟 4：測試節點拖曳
1. **移動單個節點**
   - 按住任一節點
   - 拖曳到新位置
   - 連接線自動跟隨調整
   
2. **觀察自動連接**
   - 從左側積木列表或工具箱添加新節點
   - 新節點自動連接到前一個
   - 形成視覺化流程

### 步驟 5：測試標籤切換
1. **切換左側標籤**
   - 點擊「鍵盤」標籤（綠色）
   - 觀察工具箱內容同步更新為鍵盤相關工具
   
2. **測試各標籤**
   - 操作（藍色）：移動、點擊、拖曳、滾輪
   - 鍵盤（綠色）：按鍵、輸入、組合鍵、按住
   - 控制（橘色）：等待、標籤、條件、迴圈
   - 辨識（紫色）：找圖、找字、截圖、顏色

### 步驟 6：測試右鍵功能
1. **在畫布空白處右鍵**
   - 選擇「自動排列」→ 所有節點垂直對齊
   - 選擇「轉換為文字」→ 切換到文字模式
   - 選擇「清空畫布」→ 清除所有節點（需確認）

### 步驟 7：測試模式切換
1. **切換到文字模式**
   - 點擊頂部「文字模式」按鈕
   - 查看文字指令編輯器
   - 觀察語法高亮顯示
   
2. **切換回畫布模式**
   - 再次點擊「文字模式」按鈕（變為畫布模式）
   - 畫布和工具箱重新出現

### 步驟 8：測試儲存功能
1. **修改腳本**
   - 在畫布上添加幾個新節點
   - 或切換到文字模式編輯
   
2. **儲存腳本**
   - 點擊「儲存」按鈕
   - 查看成功訊息顯示動作數量
   
3. **重新載入驗證**
   - 點擊「重新載入」
   - 確認修改已保存

### 步驟 9：測試快速指令
測試底部的 6 個快速指令按鈕：
- 🖱️ 記錄滑鼠：記錄當前滑鼠位置
- ⌨️ 快速輸入：插入輸入文字指令
- ⏰ 插入等待：添加延遲指令
- 📸 截圖辨識：截圖並創建辨識指令
- 🏷️ 新增標籤：創建跳轉標籤
- 📋 指令說明：查看完整語法參考

### 步驟 10：測試模組管理
1. **儲存模組**
   - 在文字模式選取幾行指令
   - 點擊右側「儲存模組」按鈕
   - 輸入模組名稱（例如：常用操作）
   
2. **插入模組**
   - 在模組列表雙擊或選擇後點擊「插入模組」
   - 觀察指令自動插入到編輯器

## 📊 測試腳本說明

**blockly_demo_script.json** 包含 18 個動作：
1. 移動滑鼠 (500, 300)
2. 等待 0.5 秒
3. 點擊左鍵
4. 等待 1 秒
5. 全選 (Ctrl+A)
6. 等待 0.3 秒
7. 輸入「ChroLens Blockly 測試腳本」
8. 等待 0.5 秒
9. 按下 Enter
10. 等待 1 秒
11. 移動滑鼠 (800, 400)
12. 點擊右鍵
13. 等待 0.5 秒
14. 移動滑鼠 (850, 450)
15. 點擊左鍵
16. 等待 1.5 秒
17. 儲存 (Ctrl+S)
18. 等待 0.5 秒
19. 按下 Enter

執行設定：
- 速度：100%
- 重複：3 次
- 重複時間：30 秒
- 重複間隔：2 秒

## 🎯 預期結果

### 畫布模式
- ✅ 18 個彩色節點垂直排列
- ✅ 節點之間有灰色箭頭連接
- ✅ 可拖曳任一節點，連接線跟隨
- ✅ 浮動工具箱可移動位置
- ✅ 網格背景清晰可見

### 工具箱功能
- ✅ 可拖曳到任意位置
- ✅ 可最小化/展開
- ✅ 內容隨左側標籤同步更新
- ✅ 點擊工具創建對應節點

### 文字模式
- ✅ VS Code 深色主題
- ✅ 語法高亮顯示
- ✅ 18 行指令清晰可讀
- ✅ 可編輯修改

### 雙向同步
- ✅ 載入時：JSON → 文字 + 畫布
- ✅ 儲存時：畫布/文字 → JSON
- ✅ 模式切換：內容保持一致

## 🐛 故障排除

### 問題：工具箱不見了
**解決**：可能被最小化或移到畫布外
- 切換到文字模式再切回畫布模式
- 工具箱會重置到預設位置

### 問題：節點無法拖曳
**解決**：確保點擊在節點區域內
- 節點是有顏色的矩形區域
- 點擊並按住後拖曳

### 問題：載入後畫布是空的
**解決**：可能在文字模式
- 檢查是否在畫布模式
- 或腳本沒有動作內容

### 問題：儲存失敗
**解決**：檢查腳本名稱
- 確保腳本名稱不為空
- 檢查 scripts 目錄是否存在

## 📝 測試檢查清單

完成以下測試項目：

- [ ] 編輯器成功啟動
- [ ] 載入測試腳本顯示 18 個節點
- [ ] 工具箱可拖曳移動
- [ ] 工具箱可最小化/展開
- [ ] 點擊工具創建新節點
- [ ] 節點可拖曳移動
- [ ] 連接線自動調整
- [ ] 左側標籤切換同步工具箱
- [ ] 右鍵選單功能正常
- [ ] 自動排列節點成功
- [ ] 切換到文字模式
- [ ] 文字語法高亮顯示
- [ ] 切換回畫布模式
- [ ] 儲存腳本成功
- [ ] 重新載入驗證
- [ ] 快速指令按鈕可用
- [ ] 模組管理功能正常
- [ ] 屬性設定可修改

## 🎉 測試完成

如果所有項目都通過，恭喜你！

**ChroLens Blockly 編輯器完全就緒！** 🚀

你現在擁有：
- ✨ Figma 風格的視覺化編輯體驗
- 🎨 可拖曳的浮動工具箱
- 🔄 靈活的畫布/文字雙模式
- 📦 完整的腳本管理功能
- ⚡ 豐富的快速指令工具

開始創建你的自動化腳本吧！
